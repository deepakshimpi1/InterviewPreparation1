## Enitity Framework

- An Entity Framework (EF) is an open-source ORM (Object-Relational Mapper) from Microsoft. 
- It allows developers to work with .NET applications and other domain-specific objects
- Entity framework does not focus on the original database columns and tables used to store data.
- It automatically creates codes for the data access layers, intermediate layers, and mapping codes. 
- This eventually helps developers cut down the development of work and time.

## Why should we use the Entity Framework?

- writing and managing ADO.NET codes is a problematic task. 
- Therefore, Microsoft introduced the `Entity Framework` to make this tedious task more manageable. 
- Entity Framework reduces a significant amount of code-based tasks by providing relational data in the form of domain-specific objects.

## What is ADO.NET EF?

- ADO.NET Entity Framework is an ORM framework 
- Allows us to work with different relational databases, such as Oracle, MYSQL, SQL Server, DB2, etc. 
- It enables us to work with the data either as objects or entities.

## Main components of the Entity Framework Architecture.

- `Entity Data Model (EDM):` It consists of the three parts, such as storage model, conceptual model, and mapping.
- `Entity SQL:` It is an alternate query language used in Entity Frameworks.
- `LINQ to Entities (L2E):` It is a query language that helps write queries against the object, which further helps to retrieve the entities based on the definitions specifies in the conceptual model.
- `Entity Client Data Provider:` It is defined as the layer that helps convert the L2E queries to SQL queries to be easily understood by the database. Additionally, it can interact with the ADO.NET data provider to transfer or retrieve data from different databases.
- `Net Data Provider:` It is another layer that helps interact with the database by using standard ADO.NET.
- `Object Service:` It is an entry point into the database used to access and send back the data when needed. It helps convert the data coming from an entity client data provider into an entity object structure.

## Primary functions of the Entity Framework?

- Map domain classes to the database schema.
- It helps execute LINQ queries to SQL.
- It keeps tracks of changes in the entities.

## What are the processes used to load related entities in the Entity Framework?

`Lazy Loading:` 
- This process delays the loading of related objects until there is a requirement of them. 
- Lazy loading only returns objects needed by the user, and all other related objects are only returned when required in the process.

`Eager Loading:` 
- This process mainly takes place when we query for an object. 
- Eager loading returns all the related objects. Additionally, all the related objects are automatically loaded with the parent object.

## What are the different types of inheritance supported in Entity Framework?

- Table per Hierarchy (TPH)
- Table per Type (TPT)
- Table per Concrete Class (TPC)

## Primary parts of the Entity Data Model?

There are mainly three parts of the Entity Data Model, such as:
- Storage Model
- Conceptual Model
- Mapping

## What is meant by a model in context to Entity Framework?

- A model is nothing but a class mainly used to represent the data.
- In context to EF, a model represents the data from a table inside the existing database.

Example: The following codes display the basic customer model:
```EF
public class Customer  
{  
  public int ID { get; set; }  
  public string Name { get; set; }  
  public DateTime JoinDate { get; set; }  
}  
```

## LINQ vs EF

Linq:
- It only operates with the help of the SQL Server Database.	
- It supports one to one mapping between entity classes and the relational tables.
- It maintains a relation by creating a .dbml file.
- It does not support complex types.
- It cannot generate a database by using the model.
- It enables users to query the data with DataContext.
- It contains a tightly coupled mechanism.	
- It is mainly used for faster application developments with SQL Server.

EF:
- It has various databases, such as SQL Server, MYSQL, Oracle, DB2, etc.
- It supports one to one, one to many, and many to many mapping types between the entity classes and the relational tables.
- It first creates the .edmx file. After that, it maintains a relation using three types of files: .ssdl, .msl and .csdl.
- It supports complex types.
- It can generate a database using the model.
- It allows users to query the data with DbContext, ObjectContext, and EntitySQL.
- It contains a loosely coupled mechanism.
- It is primarily used for faster application developments using SQL Server and other databases like MYSQL, Oracle, DB2, etc.

## Conceptual Model?
- The conceptual model is usually defined as the model class that consists of relationships. 
- This type of model remains independent of the database structure.

## Storage Model?
- The storage model is usually explained as the database design model that consists of database tables, stored procs, views, and keys with relationships.

---

## Entity Framework?
- Entity Framework is an ORM framework. 
- ORM stands for Object Relational Mapping.
  - Object Relational Mapping framework automatically creates classes based on database tables, and the vice versa is also true, thatis, it can also automatically generate necessary SQL to create database tables based on classes.
- EF supports various database providers, including SQL Server, MySQL, PostgreSQL, and SQLite, among others.
-  EF supports lazy loading, where related data is loaded from the database only when accessed, and eager loading, where related data is retrieved along with the main data.
- EF supports Language-Integrated Query (LINQ), which enables developers to write queries using C# syntax directly in their code. This provides a type-safe

## Database First Approach:

- Database-First approach is often chosen when working with existing databases, 
- especially in scenarios where the database schema is already well-established.
- It allows developers to leverage existing databases without having to manually create data models or write extensive code for database interactions.

Certainly! Let's walk through a simple example of the Database-First approach using Entity Framework.

### Example Scenario:
Imagine you have an existing database with a table called `Students`. The table has columns such as `StudentID`, `FirstName`, `LastName`, and `Age`. We'll use Entity Framework to generate a data model and interact with this database.

### Steps:

1. **Create an Existing Database:**
   - Assume you have a database named `SchoolDB` with a table named `Students`.

2. **Generate Entity Data Model:**
   - Use Entity Framework tools, such as the Entity Data Model Wizard in Visual Studio, to generate the data model based on the existing database.

3. **Generated Entity Classes:**
   - Entity Framework generates entity classes based on the `Students` table. These classes might look like the following:

   ```csharp
   public class Student
   {
       public int StudentID { get; set; }
       public string FirstName { get; set; }
       public string LastName { get; set; }
       public int Age { get; set; }
   }
   ```

4. **Generated Context Class:**
   - Entity Framework also generates a context class responsible for managing the interactions with the database. It might look like this:

   ```csharp
   public class SchoolDbContext : DbContext
   {
       public DbSet<Student> Students { get; set; }
   }
   ```

5. **Use Generated Code in Application:**
   - Incorporate the generated entity classes and context class into your application code:

   ```csharp
   using (var context = new SchoolDbContext())
   {
       // Querying data
       var students = context.Students.ToList();

       // Adding a new student
       var newStudent = new Student
       {
           FirstName = "John",
           LastName = "Doe",
           Age = 20
       };
       context.Students.Add(newStudent);
       context.SaveChanges();

       // Updating a student
       var existingStudent = context.Students.FirstOrDefault(s => s.FirstName == "John");
       if (existingStudent != null)
       {
           existingStudent.Age = 21;
           context.SaveChanges();
       }

       // Deleting a student
       var studentToDelete = context.Students.FirstOrDefault(s => s.LastName == "Doe");
       if (studentToDelete != null)
       {
           context.Students.Remove(studentToDelete);
           context.SaveChanges();
       }
   }
   ```

6. **Update Model as Needed:**
   - If changes are made to the database schema, you can use Entity Framework tools to update the Entity Data Model, ensuring that your data model remains in sync with the database.

This example demonstrates how the Database-First approach allows you to work with an existing database by generating the necessary code for data access based on the database schema.

---

## DbContext vs DbSet

`DbContext` and `DbSet` are both key components of Entity Framework, but they serve different purposes in the context of database interaction.

### DbContext:

- **Definition:**
  - `DbContext` is a class in Entity Framework that represents a session with the database. It is responsible for managing database connections, transaction management, and providing a set of DbSet properties.

- **Functionality:**
  - Manages the interaction between the application and the database.
  - Acts as a bridge between the application's domain entities and the database.
  - Maintains information about the database connection, the model, and provides methods for querying, updating, and persisting data.

- **Example:**
  ```csharp
  public class SchoolDbContext : DbContext
  {
      public DbSet<Student> Students { get; set; }
      public DbSet<Course> Courses { get; set; }

      // Other configuration and methods...
  }
  ```

- **Usage:**
  - Create an instance of the `DbContext` to interact with the database.
  - Provides access to multiple DbSet properties, each representing a collection of entities corresponding to a database table.

### DbSet:

- **Definition:**
  - `DbSet` is a class within Entity Framework that represents a collection of entities for a specific database table. It is a property of the `DbContext` class.

- **Functionality:**
  - Represents a set of entities (rows) for a specific table in the database.
  - Provides methods for querying, adding, updating, and deleting entities within that table.

- **Example:**
  ```csharp
  public class SchoolDbContext : DbContext
  {
      public DbSet<Student> Students { get; set; }
      public DbSet<Course> Courses { get; set; }

      // Other configuration and methods...
  }
  ```

- **Usage:**
  - Used within the `DbContext` to perform CRUD operations on entities within a specific database table.
  - Enables LINQ queries and other operations on a specific entity type.

### Relationship:

- **Connection:**
  - `DbContext` contains one or more `DbSet` properties, each corresponding to a database table.
  - `DbSet` is part of the `DbContext` and represents a specific collection of entities.

- **Hierarchy:**
  - `DbContext` is higher in the hierarchy and encapsulates the entire database context, managing all aspects of database interaction.
  - `DbSet` is a property within the `DbContext` and represents a specific set of entities within the context.

In summary, `DbContext` is the main class responsible for managing the interaction with the database, while `DbSet` is a property of `DbContext` representing a collection of entities for a specific database table. They work together to provide a high-level abstraction for database operations in Entity Framework.
